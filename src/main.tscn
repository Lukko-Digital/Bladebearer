[gd_scene load_steps=22 format=3 uid="uid://p423tqksuch1"]

[ext_resource type="PackedScene" uid="uid://ctoxk5ywvn75r" path="res://src/sword.tscn" id="1_bdv3j"]
[ext_resource type="PackedScene" uid="uid://ccb8dq5qk5vev" path="res://src/target.tscn" id="2_54gg4"]
[ext_resource type="Script" path="res://src/game_sequence_handler.gd" id="2_ngyv0"]
[ext_resource type="PackedScene" uid="uid://dkue1bq4ffn1r" path="res://src/main_camera.tscn" id="2_vb7ep"]
[ext_resource type="PackedScene" uid="uid://xcrmvdctjdpk" path="res://src/swing_arm.tscn" id="5_0705i"]
[ext_resource type="Material" uid="uid://c0gn2yap5lfrv" path="res://assets/shaders/snow.tres" id="5_tv00s"]
[ext_resource type="FontFile" uid="uid://jlvsk3howg0g" path="res://assets/fonts/RINGM___.TTF" id="7_d73xt"]
[ext_resource type="Environment" uid="uid://cos2fdybsuq2b" path="res://assets/environments/main.tres" id="7_knhja"]
[ext_resource type="Script" path="res://src/light_container.gd" id="7_pcbq2"]
[ext_resource type="PackedScene" uid="uid://cl6edab4xqatr" path="res://src/ui/both_heart_holders.tscn" id="8_c1nmu"]
[ext_resource type="PackedScene" uid="uid://bral7ar8pm8mf" path="res://src/ui/heart_border_ui.tscn" id="9_41gh3"]
[ext_resource type="PackedScene" uid="uid://b5wupy7vivd82" path="res://src/sfx_player.tscn" id="10_gaf0o"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tsayv"]
transparency = 1
depth_draw_mode = 1
albedo_color = Color(1, 1, 1, 0.0156863)
emission_enabled = true
emission = Color(1, 1, 1, 1)
emission_energy_multiplier = 1.19
disable_receive_shadows = true
proximity_fade_distance = 0.01
distance_fade_mode = 1
distance_fade_min_distance = 1.75
distance_fade_max_distance = 0.0

[sub_resource type="SphereMesh" id="SphereMesh_2egrx"]
material = SubResource("StandardMaterial3D_tsayv")
radius = 0.01
height = 0.02
radial_segments = 4
rings = 1

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_y77hc"]
dof_blur_far_distance = 4.23

[sub_resource type="Animation" id="Animation_8ka2i"]
resource_name = "Chest Open"
length = 4.0
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("%DirectionalLights:brightness")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(33.1285, 1),
"update": 0,
"values": [0.0, 1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("%OmniLights:brightness")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(33.1285, 1),
"update": 0,
"values": [0.1, 0.6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ChestLight:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(4.75684, 1),
"update": 0,
"values": [1.0, 0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ChestLight:spot_angle")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(4.75684, 1),
"update": 0,
"values": [45.0, 101.3]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("%Snow:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Sword/Sword/Blade:transparency")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 1, 1.2, 1.6, 2, 2.6, 3.4),
"transitions": PackedFloat32Array(68.5938, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [1.0, 0.999998, 0.36, 0.91, 0.41, 0.74, 0.0]
}

[sub_resource type="Animation" id="Animation_5pdrl"]
resource_name = "Chest Peek"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("%DirectionalLights:brightness")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(33.1285),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("%OmniLights:brightness")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(33.1285),
"update": 0,
"values": [0.1]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ChestLight:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(4.75684),
"update": 0,
"values": [1.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ChestLight:spot_angle")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.8, 1),
"transitions": PackedFloat32Array(17.7531, 1, 0.233259),
"update": 0,
"values": [0.0, 59.38, 45.0]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("%Snow:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Sword/Sword/Blade:transparency")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(68.5938),
"update": 0,
"values": [1.0]
}

[sub_resource type="Animation" id="Animation_tts51"]
resource_name = "In The Dark"
length = 0.1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("%DirectionalLights:brightness")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(33.1285),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("%OmniLights:brightness")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(33.1285),
"update": 0,
"values": [0.1]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ChestLight:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(4.75684),
"update": 0,
"values": [1.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ChestLight:spot_angle")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(17.7531),
"update": 0,
"values": [0.0]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("%Snow:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Sword/Sword/Blade:transparency")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(68.5938),
"update": 0,
"values": [1.0]
}

[sub_resource type="Animation" id="Animation_uom86"]
resource_name = "Main"
length = 0.1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("%DirectionalLights:brightness")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("%OmniLights:brightness")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ChestLight:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ChestLight:spot_angle")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [101.3]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("%Snow:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Sword/Sword/Blade:transparency")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_1q5g8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("%DirectionalLights:brightness")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("%OmniLights:brightness")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ChestLight:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("ChestLight:spot_angle")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [45.0]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("%Snow:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Sword/Sword/Blade:transparency")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4m25b"]
_data = {
"Chest Open": SubResource("Animation_8ka2i"),
"Chest Peek": SubResource("Animation_5pdrl"),
"In The Dark": SubResource("Animation_tts51"),
"Main": SubResource("Animation_uom86"),
"RESET": SubResource("Animation_1q5g8")
}

[node name="Main" type="Node3D"]

[node name="DirectionalLights" type="Node3D" parent="." node_paths=PackedStringArray("lights")]
unique_name_in_owner = true
transform = Transform3D(0.5, -0.75, 0.433013, 0, 0.5, 0.866025, -0.866025, -0.433013, 0.25, 0, 0, 0)
script = ExtResource("7_pcbq2")
lights = [NodePath("DirectionalLight3D"), NodePath("DirectionalLight3D2")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="DirectionalLights"]
transform = Transform3D(1, -2.98023e-08, 1.49012e-08, 0, 1, -1.49012e-08, 0, -7.45058e-09, 1, 0, 0, 0)
shadow_enabled = true

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="DirectionalLights"]
transform = Transform3D(-0.545418, -0.438655, -0.714214, -0.0509404, -0.833193, 0.550631, -0.836615, 0.336706, 0.432093, 0, 0, 0)
shadow_enabled = true

[node name="SwingArm" parent="." instance=ExtResource("5_0705i")]

[node name="Snow" type="GPUParticles3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1.03642, 0, 0, 0, 1.03642, 0, 0, 0, 1.03642, 0, 0, 0)
amount = 42045
lifetime = 4.35
local_coords = true
trail_lifetime = 1.75
process_material = ExtResource("5_tv00s")
draw_pass_1 = SubResource("SphereMesh_2egrx")

[node name="GameSequenceHandler" type="Node3D" parent="." node_paths=PackedStringArray("swing_arm", "sword", "target", "camera", "bearer_heart_holder", "opponent_heart_holder", "heart_border_ui")]
script = ExtResource("2_ngyv0")
swing_arm = NodePath("../SwingArm")
sword = NodePath("Sword")
target = NodePath("Target")
camera = NodePath("MainCamera")
bearer_heart_holder = NodePath("BothHeartHolders/BearerHeartHolder")
opponent_heart_holder = NodePath("BothHeartHolders/OpponentHeartHolder")
heart_border_ui = NodePath("HeartBorderUI")

[node name="MainCamera" parent="GameSequenceHandler" instance=ExtResource("2_vb7ep")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0194353, 1.00529)

[node name="Sword" parent="GameSequenceHandler" node_paths=PackedStringArray("blood_array") instance=ExtResource("1_bdv3j")]
blood_array = [NodePath("Sword/Blood1")]

[node name="Blood1" parent="GameSequenceHandler/Sword/Sword" index="2"]
visible = false

[node name="Target" parent="GameSequenceHandler" node_paths=PackedStringArray("sword", "swing_arm") instance=ExtResource("2_54gg4")]
sword = NodePath("../Sword")
swing_arm = NodePath("../../SwingArm")

[node name="OmniLights" type="Node3D" parent="GameSequenceHandler" node_paths=PackedStringArray("lights")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.244908, 0.32441, 0.501303)
script = ExtResource("7_pcbq2")
lights = [NodePath("OmniLight3D"), NodePath("OmniLight3D2"), NodePath("OmniLight3D3"), NodePath("OmniLight3D4")]
brightness = 0.6

[node name="OmniLight3D" type="OmniLight3D" parent="GameSequenceHandler/OmniLights"]
light_energy = 0.6

[node name="OmniLight3D2" type="OmniLight3D" parent="GameSequenceHandler/OmniLights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.733964, 0, -0.946158)
light_energy = 0.6

[node name="OmniLight3D3" type="OmniLight3D" parent="GameSequenceHandler/OmniLights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.57834, -0.263562, -0.238689)
light_energy = 0.6

[node name="OmniLight3D4" type="OmniLight3D" parent="GameSequenceHandler/OmniLights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.245055, 0, -0.946158)
light_energy = 0.6

[node name="ChestLight" type="SpotLight3D" parent="GameSequenceHandler"]
transform = Transform3D(0.965926, 0, 0.258819, 0, 1, 0, -0.258819, 0, 0.965926, 0.0481981, 0.12538, 0.0859773)
spot_range = 0.765
spot_attenuation = 1.25
spot_angle_attenuation = 1.36604e-05

[node name="WorldEnvironment" type="WorldEnvironment" parent="GameSequenceHandler"]
environment = ExtResource("7_knhja")
camera_attributes = SubResource("CameraAttributesPractical_y77hc")

[node name="BothHeartHolders" parent="GameSequenceHandler" instance=ExtResource("8_c1nmu")]

[node name="HeartBorderUI" parent="GameSequenceHandler" node_paths=PackedStringArray("camera") instance=ExtResource("9_41gh3")]
camera = NodePath("../MainCamera")

[node name="LightingAnimator" type="AnimationPlayer" parent="GameSequenceHandler"]
libraries = {
"": SubResource("AnimationLibrary_4m25b")
}
autoplay = "Main"

[node name="WinCount" type="Label3D" parent="GameSequenceHandler"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.3, 0, 0)
text = "0/4"
font = ExtResource("7_d73xt")
font_size = 80

[node name="NewBearer" type="Label3D" parent="GameSequenceHandler"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.07)
text = "a new bearer claims the sword"
font = ExtResource("7_d73xt")

[node name="SfxPlayer" parent="." instance=ExtResource("10_gaf0o")]

[editable path="GameSequenceHandler/Sword"]
[editable path="GameSequenceHandler/Sword/Sword"]
[editable path="GameSequenceHandler/BothHeartHolders"]
